!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("VueTableCanvasTcsl",[],i):"object"==typeof exports?exports.VueTableCanvasTcsl=i():t.VueTableCanvasTcsl=i()}(window,(function(){return function(t){var i={};function e(r){if(i[r])return i[r].exports;var o=i[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=i,e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)e.d(r,o,function(i){return t[i]}.bind(null,o));return r},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="/dist/",e(e.s=10)}([function(t,i,e){var r=e(7),o=e(8),n=e(9);t.exports=function(t){return r(t)||o(t)||n()}},function(t,i){t.exports=function(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoAgMAAADxkFD+AAAADFBMVEVHcEyPkJKPkJKPkJJJDUyzAAAAA3RSTlMAf4C/aSLHAAAAY0lEQVQYGbXBMQGAIBRF0QsLAyGMYAWaSTMrEIEQDi76RL8/gIPn8KdQcKnhpg23HLyCVDBJaphJ2jCLdPAIGgq3pKHxVdbQuUUNlccqnZhZ2jFZ6pgoVV7riZt3XO64WPnRBbUeMlZhqIz7AAAAAElFTkSuQmCC"},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoBAMAAAB+0KVeAAAAD1BMVEVHcEyPkJKPkJKPkJKPkJKfDcFpAAAABHRSTlMAgH9AjN1ZswAAAGVJREFUKM/V0skNwCAMRFGEK0DTQA4ugLRguf+asgBSwHPNAR+/HmIRKe02+SBRjUD3SNXdCIxUn2gErlRbNAJnqiPazy90lj74RBmxEoppvRDYKZathMCXIpxKCLwpyAWkbvcrL2KLEkTDxZqDAAAAAElFTkSuQmCC"},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoAgMAAADxkFD+AAAADFBMVEVHcEyPkJKPkJKPkJJJDUyzAAAAA3RSTlMAgEC3KR0FAAAAZklEQVQYGbXBsRGAIAxA0Q8NxxRW7sES8SzZRJZwL4ax9SIaM4CF7/Gn2HC54uYVty+8okjDZJGKmUVWzC6y8IgyNG5ZhspXSYfOLehQeGyqJ2ZSPTBJtWOCauG1nbjpwKWOC4UfXV6wIzioq5IqAAAAAElFTkSuQmCC"},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABBVBMVEVHcEyPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJKPkJJGD/YDAAAAVnRSTlMAQPMMSOsYBwb7WuRRHi3h7O4EOPWd4Mj2Cb1dYlN6l862bHMFkvKk3tD975bHEGn8yyrqewI/Ixt+/kcps8kyORK01m2TwxN9UKqONPDa03LACGrM3RgwDPIAAADiSURBVBgZ7cEFdsJQAEXBBwR317q7u1B3l7v/pfSEFskpP2EBzGioZbcU/8xpAAvAq0/evrA9JOUlH8dWuavKQ6BMSzohd0fr/KltykUySEd0TUaRU3o8y2iZtuAhzKuP89h9WHU66vmL2pn+e8pA+q1AW7aq/lZwupZBBaeUDMZxKMvE56dXQ0Z7J3TNBuTCeqGtsB2Wi8gcHTcRmX2U6IrJbBTIbPDrQEYhPzC509jCZsmoCFzmpNXHKIzJqLkIWLLtJ1Iyewcm5G0EiB7LU/gbmJG36aklsrcaRKh4pSGHH1zRWDRbpKbnAAAAAElFTkSuQmCC"},function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABAlBMVEVHcEx7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePJ7ePKFG6eUAAAAVXRSTlMA7p0JBmL1+wdI4L1AyBjrDB7kWlHs9i04BMzh810qMtDJ7znyNGlT6nICbdOqfs60wPx93doStpPVe2xQ/Y4Q8BMIP2r+w3Ok3scFI5KWKZdHs3obBIW0xAAAAOJJREFUGBntwQVWw1AARcFXd3fD3d2huDvc/W+Fk0La5tCfdAGd0UjHVTx/XdMQJoCVpLzVsazm5KWax1LeDshDNkVHoyh3H1v8SYzJRS5DV2RORsFJ+pzL6BVb5gYeNMBe4SSqFl2t6kZiWv/NlqCxGMbmC2iwR5wOZFDGqSKDdRxSMkk26ReS0fMnPTNZuYjtYgsfReUieE/XbVBml3F6CjL7Akp1fq3JKN0EjpdCC1hiMvIDhzWpfRaBdxmNnwIxWb6LFZltAvvyNg9E3uQpugO8yNvT3RS+Cw0j7V/WiMMP3QlXJYXMqtQAAAAASUVORK5CYII="},function(t,i){t.exports=function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}},function(t,i){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,i){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,i,e){"use strict";e.r(i);var r={purple:{bodyBGColor:"#ffffff",bodyColor:"#333333",headerColor:"#333333",textColor:"#666666",borderColor:"#E1E2E6",white:"#ffffff",shadowColor:"rgba(0,0,0,0.2)",fillColor:"#f9f9f9",headFillColor:"#F7F9FC",buttonColor:"#20a0ff",TotleColor:"#E6ECF5",selectColor:"#6bc9ff",selectAreaColor:"rgba(160, 195, 255, 0.2)",selectRowColor:"#f6f6f6",dotColor:"#74d337",stripeColor:"#f7f9fc"},purpleNight:{bodyBGColor:"#272e42",bodyColor:"#FEFEFE",headerColor:"#ffffff",textColor:"#FEFEFE",borderColor:"#10141b",white:"#272e42",shadowColor:"rgba(0,0,0,0.2)",fillColor:"#f9f9f9",headFillColor:"#303952",buttonColor:"#20a0ff",TotleColor:"#757d94",selectColor:"#6bc9ff",selectAreaColor:"rgba(160, 195, 255, 0.2)",selectRowColor:"#f6f6f6",dotColor:"#74d337",stripeColor:"#303952"}},o={data:function(){var t=new window.Image;t.src=e(2);var i=new window.Image;i.src=e(3);var r=new window.Image;r.src=e(4);var o=new window.Image;o.src=e(5);var n=new window.Image;n.src=e(6);var l=1*window.devicePixelRatio,s=("APP"===this.platform?12:14)*window.devicePixelRatio||1;return{theme:"purple",fontSize:s,stringsIcon:i,DescendingIcon:r,naturalOrder:t,unfixedIcon:o,fixedIcon:n,lineWidth:l,halfLineWidth:l/2,isLoading:null,blodFont:"APP"===this.platform?"bold ".concat(s,"px Roboto SC"):"bold ".concat(s,"px Roboto"),normalFont:"APP"===this.platform?"normal ".concat(s,"px Roboto SC"):"normal ".concat(s,"px Roboto")}},methods:{initCanvas:function(){var t=this.$refs.canvas,i=null;this.ctx?i=this.ctx:(i=t.getContext("2d"),this.ctx=i),i.font=this.normalFont,this.setbodyWidth(),this.clearAllCells(),this.setAllCells(0,!0),this.setBodyHeight(this.allRows,this.originPoint),this.initSize(),this.setMaxpoint(this.width,this.height,this.scrollerWidth),"PC"===this.platform&&this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth)},rePainted:function(){var t=this.initDisplayItems();return this.clearPainted(),this.painted(t),t},clearPainted:function(){this.ctx&&this.ctx.clearRect(0,0,this.width,this.height)},painted:function(t){var i=t.displayColumns,e=t.displayRows,o=t.displayCells,n=t.displayFixedCells,l=this.ctx;l&&(l.fillStyle=r[this.theme].headerColor,l.textAlign="center",l.lineWidth=this.lineWidth,l.strokeStyle=r[this.theme].borderColor,l.textBaseline="middle",o.length>0&&this.paintBGColor(l),"PC"===this.platform&&this.paintStripeBGC(l,o),this.paintBGC(l,o),o.length>0&&this.paintLine(l,e,i),this.paintBody(l,o),l.textAlign="center",this.oneOption.rowColSwap||this.paintHeader(l,i),"PC"===this.platform&&n.length>0&&0===this.fillWidth&&this.paintFixedCells(l,n,i),this.painScroller(l,this.scrollerWidth))},paintBGColor:function(t){var i=this.p,e=this.i,o=this.maxPoint,n=this.bodyHeight,l=this.originPoint;t.fillStyle=r[this.theme].bodyBGColor;var s=this.oneOption.rowColSwap?-(l.y+1):0;t.fillRect(e(0),i(s),e(o.x),i(n))},paintLine:function(t,i,e){var o=this,n=this.p,l=this.i,s=this.maxPoint,h=this.rowHeight,a=this.serialWidth,d=this.bodyHeight,f=this.toolbarHeight,c=this.originPoint;t.beginPath(),t.strokeStyle=r[this.theme].borderColor,t.lineWidth=this.lineWidth;var u=this.oneOption.rowColSwap?-(c.y+1):0;e.forEach((function(i,r){i.fixed||r===e.length-1||(t.moveTo(n(i.x+i.width)+.25*o.dpr,c.y+u),t.lineTo(n(i.x+i.width),l(d+u)))})),i.forEach((function(i){t.moveTo(a,n(i.y+i.height+u)),t.lineTo(l(s.x),n(i.y+i.height+u))})),t.moveTo(a,n(h+f+u)),t.lineTo(l(s.x),n(h+f+u)),t.stroke()},paintCellBGColor:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#ffff00",r=i.x,o=i.y,n=i.width,l=i.height;t.fillStyle=e,t.fillRect(r,o,n,l)},paintBody:function(t,i){var e=this.paintText,o=this.i,n=this.lineWidth,l=this.paintUnderline,s=this.originPoint;t.font=this.normalFont;for(var h=this.oneOption.rowColSwap?-(s.y+1):0,a=0;a<i.length;a++){var d=i[a],f=!0,c=!1,u=void 0;try{for(var y,p=d[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var m=y.value;if(!m.fixed||this.fillWidth>0)if("dontPaintX"===m.content)t.beginPath(),t.strokeStyle=r[this.theme].bodyBGColor,t.lineWidth=4*this.dpr,t.moveTo(o(m.x+(m.x?n:0)),o(m.y+h)),t.lineTo(o(m.x+m.width-this.halfLineWidth),o(m.y+h)),t.stroke();else if("dontPaintY"===m.content)t.beginPath(),t.strokeStyle=r[this.theme].TotleColor,t.lineWidth=6*this.dpr,t.moveTo(o(m.x+this.lineWidth),o(m.y+this.lineWidth+h)),"APP"===this.platform?t.lineTo(o(m.x+this.lineWidth),o(m.y+m.height+h-1)):t.lineTo(o(m.x+this.lineWidth),o(m.y+m.height+h)),t.stroke();else if("dontPaintY_Swap"===m.content){t.beginPath(),t.lineWidth=6*this.dpr;var v=!1,x=d[0].rowData;for(var g in x)if("totalLine"!==g&&x[g].indexOf("总计")>=0){v=!0;break}"APP"===this.platform?(t.strokeStyle=r[this.theme].bodyBGColor,v&&(t.strokeStyle=r[this.theme].TotleColor),t.moveTo(o(m.x+this.lineWidth),o(m.y+this.lineWidth+h-1)),t.lineTo(o(m.x+this.lineWidth),o(m.y+m.height+h-1))):(t.strokeStyle=a%2?r[this.theme].bodyBGColor:r[this.theme].headFillColor,v&&(t.strokeStyle=r[this.theme].TotleColor),t.moveTo(o(m.x+this.lineWidth),o(m.y+this.lineWidth+h)),t.lineTo(o(m.x+this.lineWidth),o(m.y+m.height+h))),t.stroke()}else if(m.paintText&&m.paintText.length>0){m.cellBgColor&&m.cellBgColor.length>0&&"列总计"!==d[0].content&&"小计"!==d[0].content&&(m.x++,m.y++,m.width--,m.height--,this.paintCellBGColor(t,m,m.cellBgColor));var P=r[this.theme].bodyColor;m.cellFontColor&&m.cellFontColor.length>0&&"列总计"!==d[0].content&&"小计"!==d[0].content&&(P=m.cellFontColor),t.beginPath(),t.fillStyle=P,m.isX&&!~m.key.indexOf("hangxiaoji")&&"totalLine"!==m.key?(t.textAlign="start",e(t,o(m.x+16*this.dpr),o(16*this.dpr+m.y+h),m.paintText,this.dpr)):(t.textAlign="end",e(t,o(m.x+(m.width-20*this.dpr)),o(16*this.dpr+m.y+h),m.paintText,this.dpr)),t.stroke(),m.canJump&&(t.beginPath(),t.strokeStyle=r[this.theme].headerColor,"APP"===this.platform?t.lineWidth=1*this.dpr:"PC"===this.platform&&(t.lineWidth=this.lineWidth/8),l(t,this.dpr,m,m.x),t.stroke())}}}catch(t){c=!0,u=t}finally{try{f||null==p.return||p.return()}finally{if(c)throw u}}}},paintStripeBGC:function(t,i){var e=this.i,o=this.bodyWidth,n=this.originPoint,l=this.lineWidth;t.fillStyle=r[this.theme].stripeColor,t.strokeStyle=r[this.theme].stripeColor;var s=this.oneOption.rowColSwap?-n.y:0,h=this.oneOption.rowColSwap?0:1;t.beginPath();var a=!0,d=!1,f=void 0;try{for(var c,u=i[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var y=c.value,p=!0,m=!1,v=void 0;try{for(var x,g=y[Symbol.iterator]();!(p=(x=g.next()).done);p=!0){var P=x.value;P.rowIndex%2===h&&(P.cellIndex>=P.rainbow||~P.key.indexOf("lishide"))&&t.fillRect(e(P.x+l*this.dpr),e(P.y+l*this.dpr+s),P.x+l*this.dpr+o,e(P.height-l*this.dpr))}}catch(t){m=!0,v=t}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}}}catch(t){d=!0,f=t}finally{try{a||null==u.return||u.return()}finally{if(d)throw f}}t.stroke()},paintBGC:function(t,i){var e=this.i,o=this.width,n=this.originPoint,l=this.lineWidth;t.fillStyle=r[this.theme].TotleColor,t.strokeStyle=r[this.theme].TotleColor;var s=this.oneOption.rowColSwap?-(n.y+1):0;t.beginPath();var h=!0,a=!1,d=void 0;try{for(var f,c=i[Symbol.iterator]();!(h=(f=c.next()).done);h=!0){var u=f.value;if(this.oneOption.rowColSwap&&u[0].isZongJi){var y=!0,p=!1,m=void 0;try{for(var v,x=u[Symbol.iterator]();!(y=(v=x.next()).done);y=!0){var g=v.value;(!g.fixed||this.fillWidth>0)&&"dontPaintX"!==g.content&&("APP"===this.platform?g.x<0?t.fillRect(e(g.x+l),e(g.y+l+s),l+g.width,e(g.height-l)):t.fillRect(e(g.x+l),e(g.y+l+s),g.x+l+o,e(g.height-l)):"PC"===this.platform&&(g.x<0?t.fillRect(e(g.x+l*this.dpr),e(g.y+l*this.dpr+s),l*this.dpr+g.width,e(g.height-l*this.dpr)):t.fillRect(e(g.x+l*this.dpr),e(g.y+l*this.dpr+s),g.x+l*this.dpr+o,e(g.height-l*this.dpr))))}}catch(t){p=!0,m=t}finally{try{y||null==x.return||x.return()}finally{if(p)throw m}}}var P=!0,w=!1,C=void 0;try{for(var b,A=u[Symbol.iterator]();!(P=(b=A.next()).done);P=!0){var k=b.value;if(!k.fixed||this.fillWidth>0)for(var J in k.rowData)"小计"===k.rowData[J]||"列总计"===k.rowData[J]||~k.key.indexOf("hangxiaoji")?"dontPaintX"!==k.content&&("APP"===this.platform?k.x<0?t.fillRect(e(k.x+l),e(k.y+l+s),l+k.width,e(k.height-l)):t.fillRect(e(k.x+l),e(k.y+l+s),k.x+l+o,e(k.height-l)):"PC"===this.platform&&(k.x<0?t.fillRect(e(k.x+l*this.dpr),e(k.y+l*this.dpr+s),l*this.dpr+k.width,e(k.height-l*this.dpr)):t.fillRect(e(k.x+l*this.dpr),e(k.y+l*this.dpr+s),k.x+l*this.dpr+o,e(k.height-l*this.dpr)))):"totalLine"===k.key&&(this.oneOption.rowColSwap&&"行总计"===k.content?"APP"===this.platform?t.fillStyle=t.strokeStyle=r[this.theme].bodyBGColor:t.fillStyle=t.strokeStyle=r[this.theme].headFillColor:t.fillStyle=t.strokeStyle=r[this.theme].TotleColor,"APP"===this.platform?t.fillRect(e(k.x+l),e(k.y+l+s),k.x+l+k.width,e(k.height-l)):"PC"===this.platform&&t.fillRect(e(k.x+l*this.dpr),e(k.y+l*this.dpr+s),k.x+l*this.dpr+k.width,e(k.height-l*this.dpr)))}}catch(t){w=!0,C=t}finally{try{P||null==A.return||A.return()}finally{if(w)throw C}}}}catch(t){a=!0,d=t}finally{try{h||null==c.return||c.return()}finally{if(a)throw d}}t.stroke()},paintText:function(t,i,e,r,o){for(var n=0;n<r.length;n+=1){var l;l=r[n],t.fillText(l,i,e+18*n*o)}},paintUnderline:function(t,i,e,r){for(var o=this.p,n=this.originPoint,l=this.oneOption.rowColSwap?-(n.y+1):0,s=0;s<e.paintText.length;s+=1)t.moveTo(o(r+16*i),o(e.y+25*i+l)+18*s*i),t.lineTo(o(r+t.measureText(e.paintText[s]).width+16*i),o(e.y+25*i+l)+18*s*i)},paintHeader:function(t,i){var e=this.width,o=this.paintHeadWord,n=this.toolbarHeight,l=this.originPoint,s=this.blodFont;t.fillStyle=r[this.theme].headFillColor,t.fillRect(0,n,e,l.y),t.beginPath(),t.strokeStyle=r[this.theme].borderColor,t.font=s,t.lineWidth=this.lineWidth;var h=this.getHeaderTree(JSON.parse(JSON.stringify(i)),{fixed:!1}),a=!0,d=!1,f=void 0;try{for(var c,u=h[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var y=c.value;y.fixed||(t.fillStyle=r[this.theme].headerColor,o(y,t))}}catch(t){d=!0,f=t}finally{try{a||null==u.return||u.return()}finally{if(d)throw f}}t.stroke()},paintFixedCells:function(t,i,e){var o=this.bodyHeight,n=this.rowHeight,l=this.maxPoint,s=this.paintText,h=this.p,a=this.i,d=this.allColumns,f=this.fixedColumns,c=this.toolbarHeight,u=this.Hierarchy,y=this.paintHeadWord,p=this.blodFont,m=this.normalFont,v=this.lineWidth,x=this.paintUnderline,g=e[e.length-1],P=this.getHeaderTree(JSON.parse(JSON.stringify(f)));g.cellIndex===d.length-1-f.length?g.x+g.width>l.x&&(t.shadowColor=r[this.theme].shadowColor):t.shadowColor=r[this.theme].shadowColor,t.fillStyle=r[this.theme].white,t.fillRect(h(-1),h(c),a(this.fixedColumnsWidth+1),a(o)),t.restore();var w=0,C=0,b=!0,A=!1,k=void 0;try{for(var J,S=i[Symbol.iterator]();!(b=(J=S.next()).done);b=!0){var B=J.value,W=0,O=!0,T=!1,I=void 0;try{for(var K,H=B[Symbol.iterator]();!(O=(K=H.next()).done);O=!0){var z=K.value;W=z.width,t.beginPath(),t.fillStyle=r[this.theme].stripeColor,t.lineWidth=v,t.font=m,z.rowIndex%2==1&&(z.key===z.rowData.stripe||~z.key.indexOf("lishide"))&&t.fillRect(a(C+v*this.dpr),a(z.y+v*this.dpr),this.fixedColumnsWidth-C,a(z.height-v*this.dpr)),t.stroke()}}catch(t){T=!0,I=t}finally{try{O||null==H.return||H.return()}finally{if(T)throw I}}C+=W}}catch(t){A=!0,k=t}finally{try{b||null==S.return||S.return()}finally{if(A)throw k}}var F=!0,R=!1,E=void 0;try{for(var D,M=i[Symbol.iterator]();!(F=(D=M.next()).done);F=!0){var X=D.value,j=0;for(var N in X){var L=X[N];if(j=L.width,t.beginPath(),t.lineWidth=v,t.font=m,t.fillStyle=r[this.theme].textColor,t.strokeStyle=r[this.theme].borderColor,t.lineWidth=v,t.moveTo(h(w+j),h(L.y)),t.lineTo(h(w+j),h(L.y+L.height)),t.lineTo(h(w),h(L.y+L.height)),t.stroke(),t.fillStyle=r[this.theme].textColor,t.strokeStyle=r[this.theme].borderColor,t.lineWidth=v,"dontPaintX"===L.content)t.beginPath(),t.strokeStyle=r[this.theme].white,t.lineWidth=3*this.dpr,t.moveTo(a(w+(w?v:0)),a(L.y)),t.lineTo(a(w+j),a(L.y)),t.stroke();else if("dontPaintY"===L.content)t.beginPath(),t.strokeStyle=r[this.theme].TotleColor,t.lineWidth=6*this.dpr,t.moveTo(a(w+v),a(L.y+v)),t.lineTo(a(w+v),a(L.y+L.height-v)),t.stroke();else if(L.paintText&&L.paintText.length>0){for(var Y in t.beginPath(),t.fillStyle=r[this.theme].TotleColor,t.strokeStyle=r[this.theme].TotleColor,L.rowData)"小计"===L.rowData[Y]||"列总计"===L.rowData[Y]?"dontPaintX"!==L.content&&(t.fillRect(a(w+v),a(L.y+v),this.fixedColumnsWidth-w,a(L.height-v)),w<0&&t.fillRect(a(w+v),a(L.y+v),this.fixedColumnsWidth,a(L.height-v))):"totalLine"===L.key&&t.fillRect(a(w+v),a(L.y+v),this.fixedColumnsWidth,a(L.height-v));t.stroke(),L.cellBgColor&&L.cellBgColor.length>0&&"列总计"!==i[0][N].content&&"小计"!==i[0][N].content&&(L.x++,L.y++,L.width--,L.height--,this.paintCellBGColor(t,L,L.cellBgColor)),t.beginPath();var G=r[this.theme].bodyColor;L.cellFontColor&&L.cellFontColor.length>0&&"列总计"!==i[0][N].content&&"小计"!==i[0][N].content&&(G=L.cellFontColor),t.fillStyle=G,t.lineWidth=v,t.font=m,L.isX?(t.textAlign="start",s(t,a(w+16*this.dpr),a(16*this.dpr+L.y),L.paintText,this.dpr)):(t.textAlign="end",s(t,a(w+(j-20*this.dpr)),a(16*this.dpr+L.y),L.paintText,this.dpr)),t.stroke(),L.canJump&&(t.beginPath(),t.strokeStyle=r[this.theme].headerColor,t.lineWidth=1*this.dpr,x(t,this.dpr,L,w),t.stroke())}t.fillStyle=r[this.theme].textColor,t.strokeStyle=r[this.theme].borderColor,t.lineWidth=v}w+=j}}catch(t){R=!0,E=t}finally{try{F||null==M.return||M.return()}finally{if(R)throw E}}t.beginPath(),t.font=p,t.fillStyle=r[this.theme].headFillColor,t.fillRect(0,0,this.fixedColumnsWidth,(u+1)*n),t.stroke(),t.textAlign="center";var V=!0,q=!1,U=void 0;try{for(var _,$=P[Symbol.iterator]();!(V=(_=$.next()).done);V=!0){var Z=_.value;t.beginPath(),t.fillStyle=r[this.theme].headerColor,y(Z,t),t.stroke()}}catch(t){q=!0,U=t}finally{try{V||null==$.return||$.return()}finally{if(q)throw U}}t.beginPath(),t.strokeStyle=r[this.theme].borderColor,t.lineWidth=v,t.moveTo(h(this.fixedColumnsWidth),h(0)),t.lineTo(h(this.fixedColumnsWidth),h(this.bodyHeight)),t.stroke()},painScroller:function(t,i){var e=this.lineWidth,o=this.p;t.fillStyle=r[this.theme].white,t.fillRect(this.width-i+e,0,i-e,this.height),t.fillRect(0,this.height-i+e,this.width,i-e),t.beginPath(),t.lineWidth=e,t.strokeStyle=r[this.theme].borderColor,t.moveTo(o(this.width-i+e),o(0)),t.lineTo(o(this.width-i+e),o(this.height-i+e)),t.lineTo(o(0),o(this.height-i+e)),t.fillStyle=r[this.theme].white,t.fillRect(o(this.width-i+e),o(this.height-i+e),i-e,i-e),t.stroke()},paintHeadWord:function(t,i){var e=this.paintHeadWord,r=this.rowHeight,o=this.p,n=this.stringsIcon,l=this.naturalOrder,s=this.DescendingIcon,h=this.unfixedIcon,a=this.fixedIcon,d=this.dpr,f=l,c=t.fixedIcon?a:h;1===t.isSort?f=s:2===t.isSort&&(f=n);var u=t.title||"- -";t.isX?(i.fillText(u,o(t.x+t.width/2),o((t.i+1)*(r/2))),i.moveTo(o(t.x+t.width),o(0)),i.lineTo(o(t.x+t.width),o(r*(t.i+1))),i.moveTo(o(t.x),o(r*(t.i+1))),i.lineTo(o(t.x+t.width),o(r*(t.i+1))),t.child&&t.child.length>0?t.child.forEach((function(t){e(t,i)})):-1===t.title.indexOf("总计")&&("PC"!==this.platform||this.oneOption.rowColSwap?"APP"!==this.platform||this.oneOption.rowColSwap||i.drawImage(f,o(t.x+t.width/2+i.measureText(u).width/2),o(t.i*(r/2)+5*d),20*d,20*d):(1!==t.isSort&&2!==t.isSort||i.drawImage(f,o(t.x+(t.width/2+i.measureText(u).width/2)),o(t.i*(r/2)+5*d),20*d,20*d),t.fixedIcon&&i.drawImage(c,o(t.x+t.width-25*d),o(t.i*(r/2)+5*d),20*d,20*d),t.isShowIcon&&(i.drawImage(f,o(t.x+(t.width/2+i.measureText(u).width/2)),o(t.i*(r/2)+5*d),20*d,20*d),i.drawImage(c,o(t.x+t.width-25*d),o(t.i*(r/2)+5*d),20*d,20*d))))):(i.fillText(u,o(t.x+t.width/2),o(t.i*r+r/2)),i.moveTo(o(t.x+t.width),o(r*t.i)),i.lineTo(o(t.x+t.width),o(r*(t.i+1))),i.moveTo(o(t.x),o(r*(t.i+1))),i.lineTo(o(t.x+t.width),o(r*(t.i+1))),t.child&&t.child.length>0?t.child.forEach((function(t){e(t,i)})):"PC"!==this.platform||this.oneOption.rowColSwap?"APP"!==this.platform||this.oneOption.rowColSwap||i.drawImage(f,o(t.x+(t.width/2+i.measureText(u).width/2)),o(t.i*r+6*d),20*d,20*d):(1!==t.isSort&&2!==t.isSort||i.drawImage(f,o(t.x+(t.width/2+i.measureText(u).width/2)),o(t.i*r+6*d),20*d,20*d),t.fixedIcon&&i.drawImage(c,o(t.x+t.width-25*d),o(t.i*r+6*d),20*d,20*d),t.isShowIcon&&(i.drawImage(f,o(t.x+(t.width/2+i.measureText(u).width/2)),o(t.i*r+6*d),20*d,20*d),i.drawImage(c,o(t.x+t.width-25*d),o(t.i*r+6*d),20*d,20*d))))},p:function(t){var i="".concat(t);return i&&i.indexOf&&-1===i.indexOf(".")?t+.5:t},i:function(t){return Math.round(t)}}};function n(t,i,e,r){var o,n=0;return"boolean"!=typeof i&&(r=e,e=i,i=void 0),function(){var l=this,s=Number(new Date)-n,h=arguments;function a(){n=Number(new Date),e.apply(l,h)}r&&!o&&a(),o&&clearTimeout(o),void 0===r&&s>t?a():!0!==i&&(o=setTimeout(r?function(){o=void 0}:a,void 0===r?t-s:t))}}var l={data:function(){return{isFirefox:!1,throttleHandleResize:null,refresh:!1,dropdownObj:{v_show:!1,top:0,left:0,activeSelect:{}}}},created:function(){this.isFirefox="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1},watch:{retract:function(){this.handleResize()}},methods:{preventEvent:function(t){this.refresh||(t.preventDefault(),t.stopPropagation())},removeEvent:function(){"APP"===this.platform?(window.removeEventListener("touchstart",this.handleMousedown,!1),window.removeEventListener("touchmove",n(16,this.handleMousemoveAPP),!1),window.removeEventListener("touchend",this.handleMouseup,!1)):"PC"===this.platform&&window.removeEventListener("mouseup",this.handleMouseup,!1),window.removeEventListener("resize",this.handleResize,!1)},initEvent:function(){window.addEventListener("resize",this.handleResize,!1),"APP"===this.platform?(this.$refs.canvas.addEventListener("click",this.handleClickAPP,!1),this.$refs.reference.addEventListener("touchstart",this.handleMousedown,!1),this.$refs.reference.addEventListener("touchmove",n(16,this.handleMousemoveAPP),!1),window.addEventListener("touchend",this.handleMouseup,!1),this.$refs.canvas.addEventListener("dblclick",this.doubleHandleClick,!1),this.$refs.canvas.addEventListener("touchmove",n(16,this.handleTouchmove),!1),this.$refs.canvas.addEventListener("touchstart",this.handleMousedown,!1)):"PC"===this.platform&&(this.$refs.canvas.addEventListener("click",this.handleClickPC,!1),this.$refs.reference.addEventListener("mousedown",this.handleMousedown,!1),this.$refs.reference.addEventListener("mousemove",n(16,this.handleMousemovePC),!0),window.addEventListener("mouseup",this.handleMouseup,!1),this.$refs.canvas.addEventListener("mousemove",n(16,this.handleMouseOver),!1),this.$refs.canvas.addEventListener(this.isFirefox?"DOMMouseScroll":"mousewheel",n(16,this.handleWheel)),this.$refs.canvas.addEventListener("contextmenu",this.handleContextmenu,!1))},handleMousedown:function(t){"APP"===this.platform&&(this.horizontalBar.size&&(this.horizontalBar.cursorX=t.touches[0].screenX),this.verticalBar.size&&(this.verticalBar.cursorY=t.touches[0].screenY))},handleMouseOver:function(t){t.stopPropagation();var i=t.offsetX*this.dpr,e=t.offsetY*this.dpr,r=null,o=null;i>this.fixedColumnsWidth?(r=this.getHeadWord(i,e,this.displayColumns),o=this.getDrillObj(i,e,this.displayCells)):(r=this.getHeadWord(i,e,this.displayColumns),o=this.getDrillObj(i,e,this.displayallFixedCells)),r?(this.allColumns=this.allColumns.map((function(t){return t.key===r.key?t.isShowIcon=!0:t.isShowIcon=!1,t})),this.fixedColumns=this.fixedColumns.map((function(t){return t.key===r.key?t.isShowIcon=!0:t.isShowIcon=!1,t})),window.requestAnimationFrame(this.rePainted)):(this.allColumns=this.allColumns.map((function(t){return t.isShowIcon=!1,t})),this.fixedColumns=this.fixedColumns.map((function(t){return t.isShowIcon=!1,t})),window.requestAnimationFrame(this.rePainted)),"pointer"===this.$refs.canvas.style.cursor&&(this.$refs.canvas.style.cursor="Default"),o&&o.canJump&&"小计"!==o.content&&"列总计"!==o.content&&"dontPaintX"!==o.content&&"dontPaintY"!==o.content&&(this.$refs.canvas.style.cursor="pointer")},handleResize:function(){var t=this;this.throttleHandleResize&&clearInterval(this.throttleHandleResize),this.throttleHandleResize=setTimeout((function(){t.offset.y=0,t.offset.x=0,t.horizontalBar.x=0,t.columns=t.columns.map((function(t){return t.fixed=!1,t.fixedIcon=!1,t})),t.setOption(t.option),t.throttleHandleResize=null}),500)},handleWheel:function(t){if("CANVAS"===t.target.tagName&&!this.isEditing){var i=t.deltaX,e=t.deltaY;if(Math.abs(i)>Math.abs(e)){var r=this.offset.x,o=0;o=this.fillWidth>0?this.maxPoint.x:this.maxPoint.x+this.fixedWidth,this.offset.x-i>0?this.offset.x=0:this.bodyWidth-o+this.offset.x<i?(this.offset.x=o-this.bodyWidth,o-this.bodyWidth<0?this.offset.x=o-this.bodyWidth:(t.preventDefault(),t.returnValue=!1)):(t.preventDefault(),t.returnValue=!1,this.offset.x-=i),r!==this.offset.x&&(window.requestAnimationFrame(this.rePainted),this.$emit("scroll"))}else{var n=this.offset.y;n-e>0?this.offset.y=0:this.bodyHeight-this.maxPoint.y+n<e?this.maxPoint.y-this.bodyHeight<0?this.offset.y=this.maxPoint.y-this.bodyHeight:(t.preventDefault(),t.returnValue=!0):(t.returnValue=!1,this.offset.y-=e),n!==this.offset.y&&(this.verticalBar.y+this.verticalBar.size>.8*this.height&&this.setAllCells(this.data.length),window.requestAnimationFrame(this.rePainted),this.$emit("scroll"))}}},handleMousemovePC:function(t){if(t.stopPropagation(),this.verticalBar.move){var i=this.maxPoint.y-this.verticalBar.size,e=this.verticalBar.y+(t.screenY-this.verticalBar.cursorY);e>0&&e<i?this.verticalBar.y+=(t.screenY-this.verticalBar.cursorY)*this.dpr:this.verticalBar.y=e<=0?0:i,this.verticalBar.cursorY=t.screenY,this.offset.y=-this.verticalBar.y/this.verticalBar.k,this.verticalBar.y+this.verticalBar.size>.9*this.height&&this.setAllCells(this.data.length),window.requestAnimationFrame(this.rePainted)}if(this.horizontalBar.move){var r=0;r=this.fillWidth>0?this.maxPoint.x-this.horizontalBar.size:this.maxPoint.x+this.fixedWidth-this.horizontalBar.size;var o=this.horizontalBar.x+(t.screenX-this.horizontalBar.cursorX);o>0&&o<r?this.horizontalBar.x+=(t.screenX-this.horizontalBar.cursorX)*this.dpr:this.horizontalBar.x=o<=0?0:r,this.horizontalBar.cursorX=t.screenX,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,window.requestAnimationFrame(this.rePainted)}},handleMousemoveAPP:function(t){if(t.stopPropagation(),this.verticalBar.move){var i=this.maxPoint.y-this.verticalBar.size,e=this.verticalBar.y+(t.touches[0].screenY-this.verticalBar.cursorY);e>0&&e<i?(this.verticalBar.y+=(t.touches[0].screenY-this.verticalBar.cursorY)*this.dpr,this.refresh=!1):e<=0?(this.verticalBar.y=0,this.refresh=!1):(this.verticalBar.y=i,this.refresh=!1),this.verticalBar.cursorY=t.touches[0].screenY,this.offset.y=-this.verticalBar.y/this.verticalBar.k,this.verticalBar.y+this.verticalBar.size>.9*this.height&&this.setAllCells(this.data.length),window.requestAnimationFrame(this.rePainted)}if(this.horizontalBar.move){var r=0;r=this.fillWidth>0?this.maxPoint.x-this.horizontalBar.size:this.maxPoint.x+this.fixedWidth-this.horizontalBar.size;var o=this.horizontalBar.x+(t.touches[0].screenX-this.horizontalBar.cursorX);o>0&&o<r?this.horizontalBar.x+=(t.touches[0].screenX-this.horizontalBar.cursorX)*this.dpr:this.horizontalBar.x=o<=0?0:r,this.horizontalBar.cursorX=t.touches[0].screenX,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,window.requestAnimationFrame(this.rePainted)}},handleTouchmove:function(t){var i=t.touches[0].screenX,e=t.touches[0].screenY;if(!this.verticalBar.move&&this.verticalBar.size>0){var r=this.maxPoint.y-this.verticalBar.size,o=this.verticalBar.y-(e-this.verticalBar.cursorY)*this.dpr*this.verticalBar.k;o>0&&o<r?(this.verticalBar.y=o,this.refresh=!1):o<=0?(this.verticalBar.y=0,this.refresh=!0):(this.verticalBar.y=r,this.refresh=!1),this.verticalBar.cursorY=e,this.offset.y=-this.verticalBar.y/this.verticalBar.k,this.verticalBar.y+this.verticalBar.size>.9*this.height&&this.setAllCells(this.data.length),window.requestAnimationFrame(this.rePainted)}if(!this.horizontalBar.move&&this.horizontalBar.size>0){var n=0;n=this.fillWidth>0?this.maxPoint.x-this.horizontalBar.size:this.maxPoint.x+this.fixedWidth-this.horizontalBar.size;var l=this.horizontalBar.x-(i-this.horizontalBar.cursorX)*this.dpr*this.horizontalBar.k;this.horizontalBar.x=l>0&&l<n?l:l<=0?0:n,this.horizontalBar.cursorX=i,this.offset.x=-this.horizontalBar.x/this.horizontalBar.k,window.requestAnimationFrame(this.rePainted)}},handleMouseup:function(){this.horizontalBar.move=!1,this.verticalBar.move=!1},handleClickAPP:function(t){if(!this.oneOption.rowColSwap){var i=t.offsetX*this.dpr,e=t.offsetY*this.dpr,r=null;if(r=this.getSortHeadIcon(i,e,this.displayColumns))return this.columns=this.columns.map((function(t){return t.key===r.key?t.isSort&&2!==t.isSort?1===t.isSort&&(t.isSort=2,r.isSort=2):(t.isSort=1,r.isSort=1):t.isSort=0,t})),void("function"==typeof this.oneOption.sortCallback&&this.oneOption.sortCallback(r));var o;(o=this.getDrillObj(i,e,this.displayCells))&&o.canJump&&this.$emit("drill",{demensionId:o.key,value:o.content})}},handleClickPC:function(t){if(!this.oneOption.rowColSwap){t.stopPropagation();var i=t.offsetX*this.dpr,e=t.offsetY*this.dpr,r=null;if(!((r=i>this.fixedColumnsWidth?this.getSortHeadIcon(i,e,this.displayColumns,20*this.dpr,25*this.dpr):this.getSortHeadIcon(i,e,this.fixedColumns,20*this.dpr,25*this.dpr))&&r.title&&r.title.indexOf("总计")>=0)){r&&(this.columns=this.columns.map((function(t){return t.key===r.key?1===t.isSort?(t.isSort=2,r.isSort=2):(t.isSort=1,r.isSort=1):t.isSort=0,t})),"function"==typeof this.oneOption.sortCallback&&this.oneOption.sortCallback(r));var o=null;if(!((o=i>this.fixedColumnsWidth?this.getFixedHeadIcon(i,e,this.displayColumns,25*this.dpr,25*this.dpr):this.getFixedHeadIcon(i,e,this.fixedColumns,25*this.dpr,25*this.dpr))&&o.title&&o.title.indexOf("总计")>=0)){if(o&&this.horizontalBar.size>0){var n=this.columns.findIndex((function(t){return t.key===o.key}));this.columns[n].fixedIcon?this.columns=this.columns.map((function(t){return t.fixed=!1,t.fixedIcon=!1,t})):(this.columns=this.columns.map((function(t,i){return t.fixedIcon=!1,t.fixed=!1,i>n||(t.fixed=!0),t})),this.columns[n].fixedIcon=!0),this.setOption(this.option)}var l=null;(l=i>this.fixedColumnsWidth?this.getDrillObj(i,e,this.displayCells):this.getDrillObj(i,e,this.displayallFixedCells))&&l.canJump&&this.$emit("drill",{demensionId:l.key,value:l.content})}}}},doubleHandleClick:function(t){if(!this.oneOption.rowColSwap){var i,e=t.offsetX*this.dpr,r=t.offsetY*this.dpr;(i=this.getDrillObj(e,r,this.displayCells))&&i.canJump&&this.$emit("drill",{demensionId:i.key,value:i.content})}},handleContextmenu:function(t){t.preventDefault();var i,e=t.offsetX*this.dpr,r=t.offsetY*this.dpr,o=this.getDrillObj(e,r,this.displayCells);return o?(this.dropdownObj.v_show=!0,this.dropdownObj.top=r,this.dropdownObj.left=e,this.dropdownObj.activeSelect=Object.assign({},o)):((i=this).dropdownObj.v_show=!1,i.dropdownObj.top=0,i.dropdownObj.left=0),!1}}};var s=e(1),h=e.n(s),a=e(0),d=e.n(a);function f(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);i&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,r)}return e}function c(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?f(Object(e),!0).forEach((function(i){h()(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}var u={data:function(){var t=window.devicePixelRatio||1,i=30*t,e=8*t;return{dpr:window.devicePixelRatio||1,width:0,height:0,rowHeight:i,scrollerWidth:e,fixedWidth:0,fixedColumnsWidth:0,bodyWidth:0,bodyHeight:0,serialWidth:0,fillWidth:0,toolbarHeight:0,allCells:[],displayCells:[],allRows:[],displayRows:[],allColumns:[],displayColumns:[],displayLayeredColumns:[],allFixedCells:[],displayallFixedCells:[],fixedColumns:[],Hierarchy:0,offset:{x:0,y:0},originPoint:{x:0,y:i},maxPoint:{x:0,y:0-e},tempTargetName:""}},methods:{calculationWidth:function(t){var i=this,e=this.ctx;return t.map((function(t){return"string"==typeof t?i.i(e.measureText(t).width)+100*i.dpr:100*i.dpr})).sort((function(t,i){return i-t}))[0]||100},setbodyWidth:function(){if(this.$refs.grid){"APP"===this.platform?(this.width=((this.$refs.grid.offsetWidth||this.defaultWidth-20)-2)*this.dpr,this.height=((this.$refs.grid.offsetHeight||this.defaultHeight-20)-2)*this.dpr):"PC"===this.platform&&(this.width=(this.$refs.grid.offsetWidth-2)*this.dpr,this.height=(this.$refs.grid.offsetHeight-2)*this.dpr),this.maxPoint.y=this.height-this.scrollerWidth,this.bodyWidth=this.originPoint.x;var t=!0,i=!1,e=void 0;try{for(var r,o=this.columns[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var n=r.value;this.bodyWidth+=this.calculationWidth(n.compare_names)}}catch(t){i=!0,e=t}finally{try{t||null==o.return||o.return()}finally{if(i)throw e}}this.fillWidth=0,this.bodyWidth<this.width-this.scrollerWidth&&(this.fillWidth=this.columns.length?(this.width-this.bodyWidth-this.scrollerWidth)/this.columns.length:0,this.bodyWidth=this.width-this.scrollerWidth)}},clearAllCells:function(){this.data=[],this.allCells=[],this.allRows=[],this.allColumns=[],this.allFixedCells=[],this.fixedColumns=[]},getAllCellsPC:function(t,i,e){var r=this;this.fixedWidth=0;for(var o=this.rowHeight,n=this.ctx,l=this.getTextLine,s=this.allRows,h=this.allCells,a=this.allColumns,f=this.fixedColumns,u=e,y="",p=function(e){for(var p=t[e],m=0,v=Object.keys(p);m<v.length;m++){var x=v[m];if(-1===x.indexOf("lishide")){"dontPaintX"!==p[x]&&(y=p[x]);break}}var g=o,P=0,w=[],C=0,b=i.findIndex((function(i){return i.key===t[e].stripe}));i.forEach((function(t,e){0===u&&(t.fixed?(f.push(c({cellIndex:P},t,{x:C,checked:!0,canJump:t.canJump,fieldId:t.fieldId})),a.push(c({height:o,cellIndex:P},t,{checked:!0,fieldId:t.fieldId,canJump:t.canJump})),C+=t.width):a.push(c({height:o,cellIndex:P},t,{checked:!0,canJump:t.canJump,fieldId:t.fieldId})));var s,h=p[t.key];if(h||0===h||""===h){if(r.oneOption.rowColSwap){var d={isX:t.isX,pres:null};if(r.indexCondition.forEach((function(t){var i;i=6!==t.fieldGroup||t.aggregatorFlag?"".concat(t.aliasName,"(").concat(t.aggregatorName,")"):"".concat(t.aliasName),y?y.indexOf(i)>=0&&(r.tempTargetName=y,(Number(h)||0===parseFloat(h))&&(d.pres=t.numDisplayed)):r.tempTargetName.indexOf(i)>=0&&(Number(h)||0===parseFloat(h))&&(d.pres=t.numDisplayed)})),r.dimensionCondition.length>0){var m=!1,v=!0,x=!1,A=void 0;try{for(var k,J=r.dimensionCondition[Symbol.iterator]();!(v=(k=J.next()).done);v=!0){var S=k.value;if(S.aliasName===t.title||S.fieldDescription===t.title){m=!0;break}}}catch(t){x=!0,A=t}finally{try{v||null==J.return||J.return()}finally{if(x)throw A}}s=l(n,h,t.width,d,m)}else if(r.indexCondition.length>0){var B=!0,W=!0,O=!1,T=void 0;try{for(var I,K=r.indexCondition[Symbol.iterator]();!(W=(I=K.next()).done);W=!0){var H=I.value;if(-1===i[0].title.indexOf(H.aliasName)&&-1===i[0].title.indexOf(H.fieldDescription)){B=!1;break}}}catch(t){O=!0,T=t}finally{try{W||null==K.return||K.return()}finally{if(O)throw T}}e>=i.length-r.indexCondition.length&&(B=!1),s=l(n,h,t.width,d,B)}}else s=l(n,h,t.width,t);var z=0;s&&(z=s.length),z>1&&g<o+18*(z-1)*r.dpr&&(g=o+18*(z-1)*r.dpr)}w.push({width:t.width,content:p[t.key],key:t.key,rowIndex:u,cellIndex:P,rainbow:b,paintText:s,fixed:!0===t.fixed,renderText:t.renderText,rowData:p,pres:t.pres,type:t.type,isX:t.isX,isChangeBgFontColor:!0,isZongJi:p[t.key].toString().indexOf("总计")>=0}),P+=1})),r.Hierarchy=Math.max.apply(Math,d()(a.map((function(t){return t.compare_names.length}))))-1,"swapNull"!==w[0].content&&(h.push(w),s.push({height:g,rowIndex:u}),u+=1)},m=e;m<t.length;m+=1)p(m);var v=!0,x=!1,g=void 0;try{for(var P,w=h[Symbol.iterator]();!(v=(P=w.next()).done);v=!0){var C=P.value,b=!0,A=!0,k=!1,J=void 0;try{for(var S,B=C[Symbol.iterator]();!(A=(S=B.next()).done);A=!0){var W=S.value;if("小计"===W.content||"列总计"===W.content){b=!1;break}}}catch(t){k=!0,J=t}finally{try{A||null==B.return||B.return()}finally{if(k)throw J}}var O=!0,T=!1,I=void 0;try{for(var K,H=C[Symbol.iterator]();!(O=(K=H.next()).done);O=!0){K.value.isChangeBgFontColor=b}}catch(t){T=!0,I=t}finally{try{O||null==H.return||H.return()}finally{if(T)throw I}}}}catch(t){x=!0,g=t}finally{try{v||null==w.return||w.return()}finally{if(x)throw g}}if(this.originPoint.y=Math.max.apply(Math,d()(a.map((function(t){return t.compare_names.length}))))*o,this.allFixedCells=[],0===this.allFixedCells.length){var z=!0,F=!1,R=void 0;try{for(var E,D=f[Symbol.iterator]();!(z=(E=D.next()).done);z=!0){var M=E.value,X=[],j=0,N=!0,L=!1,Y=void 0;try{for(var G,V=h[Symbol.iterator]();!(N=(G=V.next()).done);N=!0){var q=G.value[M.cellIndex];X.push(c({},q,{height:s[j].height,canJump:M.canJump,x:M.x,uniqueId:M.uniqueId})),j+=1}}catch(t){L=!0,Y=t}finally{try{N||null==V.return||V.return()}finally{if(L)throw Y}}this.allFixedCells.push(X)}}catch(t){F=!0,R=t}finally{try{z||null==D.return||D.return()}finally{if(F)throw R}}}this.fixedColumnsWidth=this.getHeaderTree(JSON.parse(JSON.stringify(f))).reduce((function(t,i){return t+i.width}),0)},getAllCellsAPP:function(t,i,e){var r=this;this.fixedWidth=0;for(var o=this.rowHeight,n=this.ctx,l=this.getTextLine,s=this.allRows,h=this.allCells,a=this.allColumns,f=e,u="",y=function(e){for(var y=t[e],p=0,m=Object.keys(y);p<m.length;p++){var v=m[p];if(-1===v.indexOf("lishide")){"dontPaintX"!==y[v]&&(u=y[v]);break}}var x=o,g=0,P=[];i.forEach((function(t,e){0===f&&a.push(c({height:o,cellIndex:g},t,{checked:!0,canJump:t.canJump,fieldId:t.fieldId}));var s,h=y[t.key];if(h||0===h||""===h){if(r.oneOption.rowColSwap){var d={isX:t.isX,pres:null};if(r.indexCondition.forEach((function(t){var i;i=6!==t.fieldGroup||t.aggregatorFlag?"".concat(t.aliasName,"(").concat(t.aggregatorName,")"):"".concat(t.aliasName),u?u.indexOf(i)>=0&&(Number(h)||0===parseFloat(h))&&(d.pres=t.numDisplayed):(Number(h)||0===parseFloat(h))&&(d.pres=t.numDisplayed)})),r.dimensionCondition.length>0){var p=!1,m=!0,v=!1,w=void 0;try{for(var C,b=r.dimensionCondition[Symbol.iterator]();!(m=(C=b.next()).done);m=!0){var A=C.value;if(A.aliasName===t.title||A.fieldDescription===t.title){p=!0;break}}}catch(t){v=!0,w=t}finally{try{m||null==b.return||b.return()}finally{if(v)throw w}}s=l(n,h,t.width,d,p)}else if(r.indexCondition.length>0){var k=!0,J=!0,S=!1,B=void 0;try{for(var W,O=r.indexCondition[Symbol.iterator]();!(J=(W=O.next()).done);J=!0){var T=W.value;if(-1===i[0].title.indexOf(T.aliasName)&&-1===i[0].title.indexOf(T.fieldDescription)){k=!1;break}}}catch(t){S=!0,B=t}finally{try{J||null==O.return||O.return()}finally{if(S)throw B}}e>=i.length-r.indexCondition.length&&(k=!1),s=l(n,h,t.width,d,k)}}else s=l(n,h,t.width,t);var I=0;s&&(I=s.length),I>1&&x<o+18*(I-1)*r.dpr&&(x=o+18*(I-1)*r.dpr)}P.push({width:t.width,content:y[t.key],key:t.key,rowIndex:f,cellIndex:g,paintText:s,fixed:!0===t.fixed,renderText:t.renderText,rowData:y,pres:t.pres,type:t.type,isX:t.isX,isChangeBgFontColor:!0,isZongJi:y[t.key].toString().indexOf("总计")>=0}),g+=1})),r.Hierarchy=Math.max.apply(Math,d()(a.map((function(t){return t.compare_names.length}))))-1,h.push(P),s.push({height:x,rowIndex:f}),f+=1},p=e;p<t.length;p+=1)y(p);var m=!0,v=!1,x=void 0;try{for(var g,P=h[Symbol.iterator]();!(m=(g=P.next()).done);m=!0){var w=g.value,C=!0,b=!0,A=!1,k=void 0;try{for(var J,S=w[Symbol.iterator]();!(b=(J=S.next()).done);b=!0){var B=J.value;if("小计"===B.content||"列总计"===B.content){C=!1;break}}}catch(t){A=!0,k=t}finally{try{b||null==S.return||S.return()}finally{if(A)throw k}}var W=!0,O=!1,T=void 0;try{for(var I,K=w[Symbol.iterator]();!(W=(I=K.next()).done);W=!0){I.value.isChangeBgFontColor=C}}catch(t){O=!0,T=t}finally{try{W||null==K.return||K.return()}finally{if(O)throw T}}}}catch(t){v=!0,x=t}finally{try{m||null==P.return||P.return()}finally{if(v)throw x}}this.originPoint.y=Math.max.apply(Math,d()(a.map((function(t){return t.compare_names.length}))))*o},initSize:function(){if(this.$refs.grid){"APP"===this.platform?(this.width=((this.$refs.grid.offsetWidth||this.defaultWidth-20)-2)*this.dpr,this.height=((this.$refs.grid.offsetHeight||this.defaultHeight-20)-2)*this.dpr):"PC"===this.platform&&(this.width=(this.$refs.grid.offsetWidth-2)*this.dpr,this.height=(this.$refs.grid.offsetHeight-2)*this.dpr),this.originPoint.x=this.serialWidth,this.bodyWidth=this.originPoint.x;var t=0,i=!0,e=!1,r=void 0;try{for(var o,n=this.allColumns[Symbol.iterator]();!(i=(o=n.next()).done);i=!0){var l=o.value;this.bodyWidth+=this.calculationWidth(l.compare_names),t+=1}}catch(t){e=!0,r=t}finally{try{i||null==n.return||n.return()}finally{if(e)throw r}}this.fillWidth=0,this.bodyWidth<this.width-this.scrollerWidth&&(this.fillWidth=t?(this.width-this.bodyWidth-this.scrollerWidth)/t:0,this.bodyWidth=this.width-this.scrollerWidth),this.setBodyHeight(this.allRows,this.originPoint),this.setMaxpoint(this.width,this.height,this.scrollerWidth),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth),window.requestAnimationFrame(this.rePainted)}},setBodyHeight:function(t,i){var e=i.y;this.bodyHeight=e+this.toolbarHeight;var r=!0,o=!1,n=void 0;try{for(var l,s=t[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var h=l.value;this.bodyHeight+=h.height}}catch(t){o=!0,n=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw n}}},setMaxpoint:function(t,i,e){this.maxPoint.x=t-e,this.maxPoint.y=i-e},setAllCells:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=40,o=this.allData[0]?Object.keys(this.allData[0]).length:0;this.allData.length>200&&o<500&&!e?r=25:o>500&&!e&&(r=10);for(var n=t+r>this.allData.length?this.allData.length:t+r,l=t;l<n;l+=1){var s=this.allData[l];this.data.push(s)}e&&this.columns.forEach((function(t){t.width=i.calculationWidth(t.compare_names)})),"APP"===this.platform?this.getAllCellsAPP(this.data,this.columns,t):"PC"===this.platform&&this.getAllCellsPC(this.data,this.columns,t),this.setBodyHeight(this.allRows,this.originPoint),this.resetScrollBar(this.maxPoint,this.bodyWidth,this.bodyHeight,this.fixedWidth)},getHeaderTree:function(t){var i=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fixed:!0};if(!this.Hierarchy)return t.map((function(t){return t.i=i.Hierarchy,t}));var r=[],o=[];return e.fixed||(t=t.filter((function(t){return!t.fixed}))),t&&t.forEach((function(t,e){t.i=i.Hierarchy;var n=!0,l=r.length;if(t.isX)return t.child=[],void o.push(t);for(var s in r)r[s]&&r[s].title===t.compare_names[0]&&!r[s].isX&&r[s].index+1===e&&(n=!1,l=s);if(n)r[l]={width:t.width,x:t.x,child:[],title:t.compare_names[0],compare_names:t.compare_names,i:i.Hierarchy-t.compare_names.length+1,y:(i.Hierarchy-t.compare_names.length+1)*i.rowHeight,height:i.rowHeight,index:e},t.compare_names.slice(1).length>=1&&(r[l].child=[t],r[l].child[0].compare_names=t.compare_names.slice(1));else{r[l].width+=t.width,t.compare_names=t.compare_names.slice(1),r[l].i=i.Hierarchy-t.compare_names.length,r[l].y=(i.Hierarchy-t.compare_names.length)*i.rowHeight,r[l].height=i.rowHeight;var h=c({width:t.width,x:t.x,child:[],compare_names:t.compare_names,i:i.Hierarchy},t);r[l].child.push(h),r[l].index=e}})),r.forEach((function(t){t.child[0]&&t.child[0].compare_names.length>1&&(t.child=i.getHeaderTree(t.child))})),[].concat(o,r)},initDisplayItems:function(){var t=this.getDisplayColumns(),i=this.getDisplayRows(),e=this.getDisplayCells(i,t),r=null;return"PC"===this.platform&&(r=this.getDisplayFixedCells(i)),{displayColumns:t,displayRows:i,displayCells:e,displayFixedCells:r,displayLayeredColumns:this.getHeaderTree(JSON.parse(JSON.stringify(t)))}},getDisplayColumns:function(){var t=this,i=this.offset.x,e=this.originPoint,r=this.maxPoint,o=this.allColumns,n=this.fillWidth,l=this.getHeaderTree,s=[],h=e.x+i,a=!0,d=!1,f=void 0;try{for(var c,u=o[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var y=c.value;if(y.checked){var p=y.width+n;if(p+h>e.x&&h<r.x){var m=Object.assign({},y,{x:h,width:p});s.push(m)}h+=p}}}catch(t){d=!0,f=t}finally{try{a||null==u.return||u.return()}finally{if(d)throw f}}return setTimeout((function(){t.displayColumns=[].concat(s)}),0),this.displayLayeredColumns=l(JSON.parse(JSON.stringify(this.displayColumns))),s},getDisplayRows:function(){var t=this,i=this.offset.y,e=this.originPoint,r=this.maxPoint,o=this.allRows,n=this.toolbarHeight,l=[],s=e.y+i+n,h=!0,a=!1,d=void 0;try{for(var f,c=o[Symbol.iterator]();!(h=(f=c.next()).done);h=!0){var u=f.value;if(s+u.height>e.y+n&&s<r.y){var y=Object.assign({},u,{y:s});l.push(y)}else if(s>=r.y)break;s+=u.height}}catch(t){a=!0,d=t}finally{try{h||null==c.return||c.return()}finally{if(a)throw d}}return setTimeout((function(){t.displayRows=[].concat(l)}),0),l},getDisplayCells:function(t,i){var e=this,r=[],o=this.allCells,n=this.fillWidth,l=!0,s=!1,h=void 0;try{for(var a,d=t[Symbol.iterator]();!(l=(a=d.next()).done);l=!0){var f=a.value,c=[],u=!0,y=!1,p=void 0;try{for(var m,v=i[Symbol.iterator]();!(u=(m=v.next()).done);u=!0){var x=m.value,g=o[f.rowIndex][x.cellIndex],P=Object.assign({},g,{x:x.x,y:f.y,width:g.width+n,height:f.height,canJump:x.canJump,fieldId:x.fieldId,uniqueId:x.uniqueId,cellBgColor:"",cellFontColor:"",isZongJi:o[f.rowIndex][0].isZongJi});"小计"!==P.content&&"列总计"!==P.content&&"dontPaintX"!==P.content&&"dontPaintY"!==P.content||(P.canJump=!1),P.isChangeBgFontColor&&!this.oneOption.rowColSwap&&this.dealColorOption(P,this.twoOption,x.compare_values),c.push(P)}}catch(t){y=!0,p=t}finally{try{u||null==v.return||v.return()}finally{if(y)throw p}}c[0]&&"swapNull"!==c[0].content&&"NaN"!==c[0].content&&r.push(c)}}catch(t){s=!0,h=t}finally{try{l||null==d.return||d.return()}finally{if(s)throw h}}return setTimeout((function(){e.displayCells=[].concat(r)}),0),r},getDisplayFixedCells:function(t){var i=this,e=[],r=this.allFixedCells,o=this.fillWidth,n=this.displayColumns,l=!0,s=!1,h=void 0;try{for(var a,d=r[Symbol.iterator]();!(l=(a=d.next()).done);l=!0){var f=a.value,c=[],u=!0,y=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(u=(m=v.next()).done);u=!0){var x=m.value,g=f[x.rowIndex],P=Object.assign({},g,{y:x.y,x:g.x,width:g.width+o,height:x.height,canJump:g.canJump,uniqueId:f[x.rowIndex].uniqueId,cellBgColor:"",cellFontColor:""});"小计"!==P.content&&"列总计"!==P.content&&"dontPaintX"!==P.content&&"dontPaintY"!==P.content||(P.canJump=!1);var w="",C=0,b=!0,A=!1,k=void 0;try{for(var J,S=n[Symbol.iterator]();!(b=(J=S.next()).done);b=!0){var B=J.value;if(B.uniqueId===P.uniqueId&&++C===P.cellIndex){w=B.compare_values;break}}}catch(t){A=!0,k=t}finally{try{b||null==S.return||S.return()}finally{if(A)throw k}}P.isChangeBgFontColor&&!this.oneOption.rowColSwap&&this.dealColorOption(P,this.twoOption,w),c.push(P)}}catch(t){y=!0,p=t}finally{try{u||null==v.return||v.return()}finally{if(y)throw p}}e.push(c)}}catch(t){s=!0,h=t}finally{try{l||null==d.return||d.return()}finally{if(s)throw h}}return setTimeout((function(){i.displayallFixedCells=[].concat(e)}),0),e}},destroyed:function(){this.allCells=null,this.allColumns=null,this.allRows=null,this.displayCells=null,this.displayRows=null,this.displayColumns=null,this.displayLayeredColumns=null,this.allFixedCells=null,this.displayallFixedCells=null,this.fixedColumns=null}},y={data:function(){return{horizontalBar:{x:0,size:0,move:!1,cursorX:0,k:1},verticalBar:{y:0,size:0,move:!1,cursorY:0,k:1}}},created:function(){var t=this;this.$on("scroll",(function(){t.horizontalBar.x=-parseInt(t.offset.x*t.horizontalBar.k,10),t.verticalBar.y=-parseInt(t.offset.y*t.verticalBar.k,10)}))},methods:{scroll:function(t){t.stopPropagation()},dragMove:function(t,i){i?this.verticalBar.size>0&&(this.verticalBar.move=!0,"APP"===this.platform?this.verticalBar.cursorY=t.touches[0].screenY:"PC"===this.platform&&(this.verticalBar.cursorY=t.screenY)):this.horizontalBar.size>0&&(this.horizontalBar.move=!0,"APP"===this.platform?this.horizontalBar.cursorX=t.touches[0].screenX:"PC"===this.platform&&(this.horizontalBar.cursorX=t.screenX))},resetScrollBar:function(t,i,e,r){var o=t.x,n=t.y,l=0;if("APP"===this.platform?l=o:"PC"===this.platform&&(l=this.fillWidth>0?o:o+r),0!==l){var s=l/i;s>=1?this.horizontalBar.size=0:(this.horizontalBar.size=l-(i-l)*s,this.horizontalBar.size<30&&(this.horizontalBar.size=30,s=(l-30)/(i-l))),this.horizontalBar.k=s;var h=n/e;h>1?this.verticalBar.size=0:(this.verticalBar.size=n-(e-n)*h,this.verticalBar.size<30&&(this.verticalBar.size=30,h=(n-30)/(e-n))),this.verticalBar.k=h,l-this.horizontalBar.size<-this.offset.x*this.horizontalBar.k&&(this.offset.x=l-this.bodyWidth),this.verticalBar.k>1?this.offset.y=0:this.maxPoint.y-this.verticalBar.size<-this.offset.y*this.verticalBar.k&&(this.offset.y=this.maxPoint.y-this.bodyHeight),this.horizontalBar.x=-this.offset.x*this.horizontalBar.k,this.verticalBar.y=-this.offset.y*this.verticalBar.k}}}},p={methods:{getTextLine:function(t,i,e,r){r.isX;var o=r.pres,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];o&&!n&&"- -"!==i&&(i=this.addingUnit(i,o.state.unit),i=this.fmoney(i,o.state.dec,o.state.commas),i+=o.state.unit);for(var l="".concat(i).split(""),s="",h=[],a=0;a<l.length;a+=1)t.measureText(s).width>=e-36*this.dpr+this.fillWidth&&(h.push(s),s=""),s+=l[a];return h.push(s),h},addingUnit:function(t,i){var e=t;return"万"===i?e=t/1e4:"亿"===i?e=t/1e8:"K"===i?e=t/1e3:"M"===i?e=t/1e6:"%"===i&&(e=100*t),e},round:function(t,i){for(var e=1;i>0;e*=10,i--);for(;i<0;e/=10,i++);return Math.round(t*e)/e},fmoney:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=arguments.length>2?arguments[2]:void 0,r=t.toString().split(".");if(2===r.length&&r[1].length>7){var o=r[1].substring(0,7);t=r[0]+"."+o}var n=(t=parseFloat((t+"").replace(/[^\d\.-]/g,"")))<0;n&&(t=Math.abs(t)),t=this.round(t,i),n&&(t=-t),0===parseFloat(t)&&(t=Number(0).toFixed(i));var l=t.toString().split(".");if(l[1])l[1]=(l[1]+"000000").substring(0,i);else{for(var s="",h=0;h<i;h++)s+="0";l.push(s)}return e&&(l[0]=l[0].replace(new RegExp("(\\d)(?=(\\d{3})+$)","ig"),"$1,")),i>0?l.join("."):l[0]+""},getHeadWord:function(t,i,e){var r=this,o=null;return function e(n){var l=!0,s=!1,h=void 0;try{for(var a,d=n[Symbol.iterator]();!(l=(a=d.next()).done);l=!0){var f=a.value;f.child&&f.child.length>0?e(f.child):t>f.x&&t<f.x+f.width&&i>(f.isX?0:f.i*r.rowHeight)&&i<(f.i+1)*r.rowHeight&&(o=Object.assign({},f))}}catch(t){s=!0,h=t}finally{try{l||null==d.return||d.return()}finally{if(s)throw h}}}(this.getHeaderTree(JSON.parse(JSON.stringify(e)))),o},getFixedHeadIcon:function(t,i,e,r,o){var n=this,l=null;return function e(s){var h=!0,a=!1,d=void 0;try{for(var f,c=s[Symbol.iterator]();!(h=(f=c.next()).done);h=!0){var u=f.value;u.child&&u.child.length>0?e(u.child):t>u.x+u.width-r&&t<u.x+u.width-(r-o)&&i>(u.isX?0:u.i*n.rowHeight)&&i<(u.i+1)*n.rowHeight&&(l=Object.assign({},u))}}catch(t){a=!0,d=t}finally{try{h||null==c.return||c.return()}finally{if(a)throw d}}}(this.getHeaderTree(JSON.parse(JSON.stringify(e)))),l},getSortHeadIcon:function(t,i,e,r){var o=this,n=null;return function e(l){var s=!0,h=!1,a=void 0;try{for(var d,f=l[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var c=d.value;c.child&&c.child.length>0?e(c.child):"APP"===o.platform?t>c.x&&t<c.x+c.width&&i>(c.isX?0:c.i*o.rowHeight)&&i<(c.i+1)*o.rowHeight&&(n=Object.assign({},c)):"PC"===o.platform&&t>c.x+c.width/2+o.ctx.measureText(c.title).width/2&&t<c.x+(c.width/2+o.ctx.measureText(c.title).width/2)+r&&i>(c.isX?0:c.i*o.rowHeight)&&i<(c.i+1)*o.rowHeight&&(n=Object.assign({},c))}}catch(t){h=!0,a=t}finally{try{s||null==f.return||f.return()}finally{if(h)throw a}}}(this.getHeaderTree(JSON.parse(JSON.stringify(e)))),n},getDrillObj:function(t,i,e){var r=this.oneOption.rowColSwap?-(this.originPoint.y+1):0,o=null,n=!0,l=!1,s=void 0;try{for(var h,a=e[Symbol.iterator]();!(n=(h=a.next()).done);n=!0){var d=h.value,f=!0,c=!1,u=void 0;try{for(var y,p=d[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var m=y.value;t>m.x&&t<m.x+m.width&&i>m.y+r&&i<m.height+m.y+r&&(o=m)}}catch(t){c=!0,u=t}finally{try{f||null==p.return||p.return()}finally{if(c)throw u}}}}catch(t){l=!0,s=t}finally{try{n||null==a.return||a.return()}finally{if(l)throw s}}return o},rgbToHex:function(t,i,e){var r=(t<<16|i<<8|e).toString(16);return"#"+new Array(Math.abs(r.length-7)).join("0")+r},hexToRgb:function(t){for(var i=[],e=1;e<7;e+=2)i.push(parseInt("0x"+t.slice(e,e+2)));return i},gradient:function(t,i,e){for(var r=this.hexToRgb(t),o=this.hexToRgb(i),n=(o[0]-r[0])/e,l=(o[1]-r[1])/e,s=(o[2]-r[2])/e,h=[],a=0;a<e;a++)h.push(this.rgbToHex(parseInt(n*a+r[0]),parseInt(l*a+r[1]),parseInt(s*a+r[2])));return h},dealColorOption:function(t,i){arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("tableColor"===i.type){var e=i.value,r=!0,o=!1,n=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var h=l.value;if(t.uniqueId===h.uniqId){if("0"===h.colorType)this.dealColorOnly(t,h);else if("1"===h.colorType){var a=0,d=0,f=!0,c=!1,u=void 0;try{for(var y,p=this.colorStepConfig[Symbol.iterator]();!(f=(y=p.next()).done);f=!0){var m=y.value;if(m.uniqueId===h.uniqId){a=m.min,d=m.max;break}}}catch(t){c=!0,u=t}finally{try{f||null==p.return||p.return()}finally{if(c)throw u}}this.dealColorStep(t,h,a,d)}break}}}catch(t){o=!0,n=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw n}}}},dealColorOnly:function(t,i){var e=function(t,i){t.cellBgColor=i.color.bgColor,t.cellFontColor=i.color.fontColor};if("- -"===t.content)for(var r=0;r<i.color.length;r++){var o=i.color[r];2===o.compare&&e(t,o)}var n=Number(t.content);if(0===n||n)for(var l=0;l<i.color.length;l++){var s=i.color[l];switch(s.compare){case 0:n>=s.min&&n<=s.max&&e(t,s);break;case 1:n===s.min&&e(t,s);break;case 2:n!==s.min&&e(t,s);break;case 3:n>s.min&&e(t,s);break;case 4:n>=s.min&&e(t,s);break;case 5:n<s.min&&e(t,s);break;case 6:n<=s.min&&e(t,s)}}},dealColorStep:function(t,i,e,r){var o=Number(t.content);if(0===o||o){if(r===e)t.cellBgColor=i.color[0].color.startColor;else{var n=(o-e)/(r-e),l=this.gradient(i.color[0].color.startColor,i.color[0].color.endColor,10);t.cellBgColor=1===n?i.color[0].color.endColor:l[Math.floor(10*n)]}t.cellFontColor=i.color[0].color.fontColor}}}};i.default={painted:o,events:l,calculate:u,scroller:y,utils:p}}])}));
//# sourceMappingURL=build.js.map